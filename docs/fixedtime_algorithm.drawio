<mxfile host="65bd71144e">
    <diagram id="SmKWZeOlkfU7Dyu4ne95" name="Page-1">
        <mxGraphModel dx="1815" dy="605" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="27" value="Maintenance mapping from service key to latest heart beat pointer. &lt;br&gt;(Powered by Hashtable, so we can find it in O(1) time.)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="19" y="292" width="390" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="28" value="Mantenance unique heartbeats queue.&lt;br&gt;(Powered by doubly linked list,so we can remove old heartbeat in O(1) time.)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="80" y="555" width="690" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="31" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.rect;fillColor2=none;strokeWidth=1;size=20;indent=5;" parent="1" vertex="1">
                    <mxGeometry x="270" y="492" width="107" height="58" as="geometry"/>
                </mxCell>
                <mxCell id="45" value="" style="shape=table;html=1;whiteSpace=wrap;startSize=0;container=1;collapsible=0;childLayout=tableLayout;" parent="1" vertex="1">
                    <mxGeometry x="37" y="330" width="270" height="136" as="geometry"/>
                </mxCell>
                <mxCell id="61" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="45" vertex="1">
                    <mxGeometry width="270" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="62" value="service key 1" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="61" vertex="1">
                    <mxGeometry width="135" height="34" as="geometry">
                        <mxRectangle width="135" height="34" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="63" value="latest heartbeat pointer" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="61" vertex="1">
                    <mxGeometry x="135" width="135" height="34" as="geometry">
                        <mxRectangle width="135" height="34" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="58" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="45" vertex="1">
                    <mxGeometry y="34" width="270" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="59" value="&lt;span&gt;service key 2&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="58" vertex="1">
                    <mxGeometry width="135" height="34" as="geometry">
                        <mxRectangle width="135" height="34" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="60" value="&lt;span&gt;latest heartbeat pointer&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="58" vertex="1">
                    <mxGeometry x="135" width="135" height="34" as="geometry">
                        <mxRectangle width="135" height="34" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="46" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="45" vertex="1">
                    <mxGeometry y="68" width="270" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="47" value="&lt;span&gt;service key 3&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="46" vertex="1">
                    <mxGeometry width="135" height="34" as="geometry">
                        <mxRectangle width="135" height="34" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="48" value="&lt;span&gt;latest heartbeat pointer&lt;/span&gt;" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="46" vertex="1">
                    <mxGeometry x="135" width="135" height="34" as="geometry">
                        <mxRectangle width="135" height="34" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="54" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="45" vertex="1">
                    <mxGeometry y="102" width="270" height="34" as="geometry"/>
                </mxCell>
                <mxCell id="55" value="..." style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="54" vertex="1">
                    <mxGeometry width="135" height="34" as="geometry">
                        <mxRectangle width="135" height="34" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="56" value="..." style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;pointerEvents=1;" parent="54" vertex="1">
                    <mxGeometry x="135" width="135" height="34" as="geometry">
                        <mxRectangle width="135" height="34" as="alternateBounds"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="66" value="Push new beartbeat to the tail of the queue &amp;amp; remove old one." style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="669" y="501.5" width="203" height="37" as="geometry"/>
                </mxCell>
                <mxCell id="72" value="Start one goroutine to check the head of heartbeat and pop timeout heartbeat." style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="20" y="506" width="220" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="73" value="" style="shape=singleArrow;direction=west;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="240" y="510" width="30" height="24" as="geometry"/>
                </mxCell>
                <mxCell id="76" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.422;entryY=-0.085;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="61" target="85" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="387" y="550" as="sourcePoint"/>
                        <mxPoint x="447" y="490" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="77" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.533;entryY=-0.023;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="58" target="86" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="317" y="357" as="sourcePoint"/>
                        <mxPoint x="547" y="430" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="78" value="" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="46" target="31" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="317" y="391" as="sourcePoint"/>
                        <mxPoint x="573.6400000000001" y="579.6800000000001" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="79" value="service 3 latest heartbeat" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="278" y="498" width="90" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="84" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.rect;fillColor2=none;strokeWidth=1;size=20;indent=5;" parent="1" vertex="1">
                    <mxGeometry x="401" y="491.5" width="107" height="58" as="geometry"/>
                </mxCell>
                <mxCell id="85" value="service 1 latest heartbeat" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="409" y="497.5" width="90" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="86" value="" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.rect;fillColor2=none;strokeWidth=1;size=20;indent=5;" parent="1" vertex="1">
                    <mxGeometry x="532" y="491" width="107" height="58" as="geometry"/>
                </mxCell>
                <mxCell id="87" value="service 2 latest heartbeat" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
                    <mxGeometry x="540" y="497" width="90" height="45" as="geometry"/>
                </mxCell>
                <mxCell id="90" value="" style="shape=singleArrow;direction=west;whiteSpace=wrap;html=1;" parent="1" vertex="1">
                    <mxGeometry x="640" y="507.5" width="30" height="24" as="geometry"/>
                </mxCell>
                <mxCell id="91" value="" style="endArrow=classic;html=1;entryX=0.988;entryY=0.293;entryDx=0;entryDy=0;entryPerimeter=0;exitX=-0.012;exitY=0.302;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="84" target="31" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="197" y="650" as="sourcePoint"/>
                        <mxPoint x="247" y="600" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="92" value="" style="endArrow=classic;html=1;entryX=0.012;entryY=0.635;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.626;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="31" target="84" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="409.7160000000001" y="519.0159999999998" as="sourcePoint"/>
                        <mxPoint x="385.7160000000001" y="518.9939999999999" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="100" value="" style="endArrow=classic;html=1;entryX=0.988;entryY=0.293;entryDx=0;entryDy=0;entryPerimeter=0;exitX=-0.012;exitY=0.302;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="530.7160000000001" y="509.01599999999985" as="sourcePoint"/>
                        <mxPoint x="506.7160000000001" y="508.9939999999999" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="101" value="" style="endArrow=classic;html=1;entryX=0.012;entryY=0.635;entryDx=0;entryDy=0;entryPerimeter=0;exitX=1;exitY=0.626;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="508" y="528.308" as="sourcePoint"/>
                        <mxPoint x="533.2839999999999" y="528.3299999999999" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="102" value="Fixed timeout heartbeats watcher" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
                    <mxGeometry x="250" y="210" width="390" height="50" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>